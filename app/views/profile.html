<!DOCTYPE html>
<html>
<head>
	<title>Profile</title>
	<!-- Latest compiled and minified CSS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="profile.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

</head>
<body>
<!-- NAV BAR -->
     <nav class="navbar navbar-default">
       <div class="container-fluid">
         <!-- Brand and toggle get grouped for better mobile display -->
         <div class="navbar-header">
           <h4>Web Title</h4>
         </div>
         <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
               <ul class="nav navbar-nav">

                 <li><a href="/dashboard"><u>Home</u></a></li>
                 <li><a href="/users"><u>Users</u></a></li>
                 <li><a href="/events/add"><u>Add an Event</u></a></li>
               </ul>
         <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
           <ul class="nav navbar-nav navbar-right">
             <li>
               <div class="dropdown">
                 <button class="btn btn-default dropdown-toggle" type="button" id="account-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                   Account
                   <span class="caret"></span>
                 </button>
                 <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                   <li><a href="/profile/<id>">Profile</a></li>
                   <li><a href="/logout">Logout</a></li>
                 </ul>
               </div>
             </li>
           </ul>
           <ul class="nav navbar-nav navbar-right" style="margin-right:10px">

             <li><p>Welcome {{user.first_name}}</p></li>

           </ul>
         </div><!-- /.navbar-collapse -->
       </div><!-- /.container-fluid -->
     </nav>
     <!-- END OF NAV BAR -->
	<div id="profile_bar" class="row">
		<div id="person_pf" class="col-sm-4 text-center">
			<div id="profile_info"><img src="http://zblogged.com/wp-content/uploads/2015/11/5.png" height="200px" width="200px">
			<h2>{{pf_info.first_name}} {{pf_info.last_name}}</h2>
			</div>
		</div>

		<!-- LIKE BUTTONS -->

		<div id="rating" class="col-sm-4 text-center">
			<h4>100% of the people recommended {{pf_info.first_name}} and [dog].</h4><br />
			<div id="likes" class="row">
				<form name="ratings" action='/like/{{pf_info.id}}' method='post'>
				    <input type="button" class="btn btn-info" name="like" value="Like">
				    <input type="button" class="btn btn-warning" name="dislike" value="Dislike">
				</form>
			</div>
		</div>

		<!-- END LIKE BUTTONS -->

		<div id="dog_pf" class="col-sm-4 text-center">
			<div id="dog_info"><img src="http://r.ddmcdn.com/s_f/o_1/cx_633/cy_0/cw_1725/ch_1725/w_720/APL/uploads/2014/11/too-cute-doggone-it-video-playlist.jpg" height="200px" width="200px">
				{% if dog_info %}
				<h2>{dog_info.name}</h2>
				{% endif %}
				{% if session['id'] == pf_info.id %}
					{% if not dog_info %}
					<h4>Add Your Dog Information!</h4>
					{% endif %}
				{% else %}
					{% if not dog_info %}
					<h4>No Dog Information</h4>
					{% endif %}
				{% endif %}
			</div>
		</div>
	</div>
	<!-- USER INFO -->
	<div id="information" class="row">
		<div id="ppl" class="col-sm-6">
			<div class="row">
				<div class="col-sm-3 col-sm-offset-1">
					<p>Email:</p>
				</div>
				<div class="col-sm-7 text-left">
					<p>{{pf_info.email}}</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3 col-sm-offset-1">
					<p>Date of Birth:</p>
				</div>
				<div class="col-sm-7 text-left">
					<p>{{pf_info.DOB}}</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3 col-sm-offset-1">
					<p>About Me:</p>
				</div>
				<div class="col-sm-7 text-left">
					<p>{{pf_info.description}}</p>
				</div>
			</div>
			<div class="row">
				<!-- BEGINNING OF MODAL -->
				<div class="col-sm-4 col-sm-offset-2 text-center">
					{% if session['id'] == pf_info.id %}
						<button type="button" class="btn btn-success" data-toggle="modal" name="edit_profile" data-target="#profile_edit">Edit Profile</button>

						<div class="modal fade" id="profile_edit" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
						  <div class="modal-dialog" role="document">
						    <div class="modal-content">
						      <div class="modal-header">
						        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						        <h4 class="modal-title" id="exampleModalLabel">Edit Profile</h4>
						      </div>
						      <div class="modal-body">
						        <form action="/profile/edit/{session['id']}">
											<div class="form-group">
						            <label for="first_name" class="control-label">First Name:</label>
						            <input type="text" class="form-control" id="first_name" name="first_name" value={{user.first_name}}>
						          </div>
											<div class="form-group">
						            <label for="last_name" class="control-label">Last Name:</label>
						            <input type="text" class="form-control" id="last_name" name="last_name" value={{user.last_name}}>
						          </div>
						          <div class="form-group">
						            <label for="email" class="control-label">Email:</label>
						            <input type="email" class="form-control" id="email" name="email" value={{user.email}}>
						          </div>
											<div class="row">
												<div class="form-group col-sm-4 col-sm-offset-4">
							            <label for="dob" class="control-label">Date of Birth:</label>
							            <input type="date" class="form-control" id="dob" name="dob" value={{user.DOB}}>
							          </div>
											</div>
											<div class="row">
												<div class="form-group">
							            <label for="description" class="control-label">Description:</label>
							            <textarea class="form-control" id="description" name="description" value={{user.description}}></textarea>
							          </div>
											</div>
											<div class="modal-footer">
								        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								        <input type="submit" class="btn btn-primary" name="update" value="Update Profile">
								      </div>
						        </form>
						      </div>
						    </div>
						  </div>
						</div>
					{% endif %}
				</div>
				<!-- END OF MODAL -->
			</div>
		</div>
		<!-- END PPL INFO -->
		<!-- START DOG INFO -->
		{% if dog_info %}
		<div id="doggy" class="col-sm-6">
			<div class="row">
				<div class="col-sm-3 col-sm-offset-1">
					<p>Type:</p>
				</div>
				<div class="col-sm-7 text-left">
					<p>{{dog_info.type}}</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3 col-sm-offset-1">
					<p>Date of Birth:</p>
				</div>
				<div class="col-sm-7 text-left">
					<p>{{dog_info.DOB}}</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3 col-sm-offset-1">
					<p>Gender:</p>
				</div>
				<div class="col-sm-7 text-left">
					<p>{{dog_info.gender}}</p>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3 col-sm-offset-1">
					<p>About Me:</p>
				</div>
				<div class="col-sm-7 text-left">
					<p>{{dog_info.description}}</p>
				</div>
			</div>
			<div class="row">
			{% endif %}
				<div class="col-sm-4 col-sm-offset-2 text-center">
					{% if session['id'] == pf_info.id %}
						<form action="/dog/edit/{session['id']}" method='post'>
							<input type="submit" class="btn btn-success" name="edit" value="Edit Dog Profile" />
						</form>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
		<!-- END DOG INFO -->
	<!-- END USER INFO -->
	<div id="main_content" class="row">
		  <div id="hosting" class="col-sm-5 col-sm-offset-2">
          <h2>Events I'm hosting</h2>
          {% for event in events_hosting: %}
            <div>
              <h3><a href="/event_description/{{event['id']}}">{{event['name']}}</a></h3>
              <h5>{{ event['location'] }} {{ event['date'] }}</h5>
              <p>{{event['description']}}</p>
            </div><br><br><br>
          {% endfor %}
      </div>

      <div id="attending" class="col-sm-5">
          <h2>Events I'm attending</h2>

          {% for event in events_attending: %}
            <div>
              <h3><a href="/event_description/{{event['id']}}">{{event['name']}}</a></h3>
              <h5>{{ event['location'] }} {{ event['date'] }}</h5>
              <p>{{event['description']}}</p>
            </div><br><br><br>
          {% endfor %}

      </div>

      <div>Leave a message to {{pf_info.first_name}}</div>
          <form action="post_message/{{pf_info.id}}" method="POST">
              <textarea cols="60" rows="8" name="message"></textarea>
              <input type="submit" value="Post"></input>
          </form>
      </div>
      {% for message in messages: %}

    <div style="margin-left: 40px;">
      <h3>{{ message['first_name'] }}{{ message['last_name'] }} wrote:</h3><h4>{{message['created_at']}}</h4>
      <p style="background-color: #EAE6DE; width: 60%; margin: 20px; padding: 20px;">{{message['message']}}</p>
        {% for comment in comments: %}

          {% if comment['message_id'] == message['message_id'] %}
          <div style="background-color: #F6F5F1; width: 40%; margin-left: 100px;">
          <h4>{{ comment['first_name'] }}{{ comment['last_name'] }} wrote:</h4><h6>{{comment['created_at']}}</h6>
          <p>{{comment['comment']}}</p>
          </div>
          {% endif %}
        {% endfor %}
        <form action="post_comment/{{message['message_id']}}/{{pf_info.id}}" method="POST" style="margin-left: 600px; display: block">
          <textarea rows="2" cols="30" name="comment"></textarea>
          <input type="submit" value="Comment"></input>
        </form>

    </div>

  {% endfor %}
</body>
</html>
